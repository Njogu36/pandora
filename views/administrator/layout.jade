doctype html
html.light-style.layout-navbar-fixed.layout-menu-fixed(lang='en' dir='ltr' data-theme='theme-default' data-assets-path='/assets/' data-template='vertical-menu-template')
  head
    meta(charset='utf-8')
    meta(name='viewport' content='width=device-width, initial-scale=1.0, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0')
    title Pandora Prints - #{url.split('/').pop()}
    meta(name='description' content='')
    // Favicon
    link(rel='icon' type='image/x-icon' href='/assets/favicons/favicon.ico')
    // Fonts
    link(rel='preconnect' href='https://fonts.googleapis.com')
    link(rel='preconnect' href='https://fonts.gstatic.com' crossorigin='')
    link(href='https://fonts.googleapis.com/css?family=Nunito:300,400,400i,600,700,800,900' rel='stylesheet')
 
    link(href='https://fonts.googleapis.com/css2?family=Public+Sans:ital,wght@0,300;0,400;0,500;0,600;0,700;1,300;1,400;1,500;1,600;1,700&display=swap' rel='stylesheet')
    // Icons
    link(rel='stylesheet' href='/assets/vendor/fonts/fontawesome.css')
    link(rel='stylesheet' href='/assets/vendor/fonts/tabler-icons.css')
    link(rel='stylesheet' href='/assets/vendor/fonts/flag-icons.css')
    // Core CSS
    link.template-customizer-core-css(rel='stylesheet' href='/assets/vendor/css/rtl/core.css')
    link.template-customizer-theme-css(rel='stylesheet' href='/assets/vendor/css/rtl/theme-default.css')
    link(rel='stylesheet' href='/assets/css/demo.css')
    // Vendors CSS
    link(rel='stylesheet' href='/assets/vendor/libs/perfect-scrollbar/perfect-scrollbar.css')
    link(rel='stylesheet' href='/assets/vendor/libs/node-waves/node-waves.css')
    link(rel='stylesheet' href='/assets/vendor/libs/typeahead-js/typeahead.css')
    link(rel='stylesheet' href='/assets/vendor/libs/apex-charts/apex-charts.css')
    link(rel='stylesheet' href='/assets/vendor/libs/swiper/swiper.css')
    link(rel='stylesheet' href='/assets/vendor/libs/datatables-bs5/datatables.bootstrap5.css')
    link(rel='stylesheet' href='/assets/vendor/libs/datatables-responsive-bs5/responsive.bootstrap5.css')
    link(rel='stylesheet' href='/assets/vendor/libs/datatables-checkboxes-jquery/datatables.checkboxes.css')
    // Page CSS
    link(rel='stylesheet' href='/assets/vendor/css/pages/cards-advance.css')
    // Helpers
    link(rel="stylesheet", href="https://cdn.datatables.net/1.10.22/css/jquery.dataTables.min.css")
    link(rel="stylesheet", href="https://cdn.datatables.net/buttons/1.6.4/css/buttons.dataTables.min.css")
   
    script(src='/assets/vendor/js/helpers.js')
    // ! Template customizer & Theme config files MUST be included after core stylesheets and helpers.js in the <head> section
    // ? Template customizer: To hide customizer set displayCustomizer value false in config.js.
    script(src='/assets/vendor/js/template-customizer.js')
    // ? Config:  Mandatory theme config file contain global vars & default theme options, Set your preferred theme option in this file.
    script(src='/assets/js/config.js')
    style.
      .description {
        overflow: hidden;
        text-overflow: ellipsis;
        white-space: nowrap;
        width:200px;
        height:100px
      }
      #has_icons_div
      {
        display:none
      }

  body
    // Layout wrapper
    .layout-wrapper.layout-content-navbar
      .layout-container
        // Menu
        aside#layout-menu.layout-menu.menu-vertical.menu.bg-menu-theme
          .app-brand.demo
            a.app-brand-link(href='/admin/account')
              span.app-brand-logo.demo
                img(src="/assets/logo/logo.png",style='width:35px', alt="")
                
              
            a.layout-menu-toggle.menu-link.text-large.ms-auto(href='javascript:void(0);')
              i.ti.menu-toggle-icon.d-none.d-xl-block.ti-sm.align-middle
              i.ti.ti-x.d-block.d-xl-none.ti-sm.align-middle
          .menu-inner-shadow
          ul.menu-inner.py-1
            // Dashboards
            - const activePage = url.split('/').pop()
            li.menu-item(class= activePage === 'admin' ? 'active':"")
              a.menu-link(href='/admin')
                i.menu-icon.tf-icons.ti.ti-smart-home
                div(data-i18n='Dashboard') Dashboard
            li.menu-item(class= activePage === 'products' ? 'active':"")
              a.menu-link(href='/admin/products')
                i.menu-icon.tf-icons.ti.ti-brand-producthunt
                div(data-i18n='Products') Products
            li.menu-item(class= activePage === 'orders' ? 'active':"")
              a.menu-link(href='/admin/orders')
                i.menu-icon.tf-icons.ti.ti-list
                div(data-i18n='Orders') Orders
            li.menu-item(class= activePage === 'transactions' ? 'active':"")
              a.menu-link(href='/admin/transactions')
                i.menu-icon.tf-icons.ti.ti-currency-dollar
                div(data-i18n='Transactions') Transactions
            li.menu-item(class= activePage === 'customers' ? 'active':"")
              a.menu-link(href='/admin/customers')
                i.menu-icon.tf-icons.ti.ti-users
                div(data-i18n='Customers') Customers
            li.menu-item(class= activePage === 'settings' ? 'active':"")
              a.menu-link(href='/admin/settings')
                i.menu-icon.tf-icons.ti.ti-settings
                div(data-i18n='Settings') Settings
                
            
              
        // / Menu
        // Layout container
        .layout-page
          // Navbar
          nav#layout-navbar.layout-navbar.container-xxl.navbar.navbar-expand-xl.navbar-detached.align-items-center.bg-navbar-theme
            .layout-menu-toggle.navbar-nav.align-items-xl-center.me-3.me-xl-0.d-xl-none
              a.nav-item.nav-link.px-0.me-xl-4(href='javascript:void(0)')
                i.ti.ti-menu-2.ti-sm
            #navbar-collapse.navbar-nav-right.d-flex.align-items-center
              // Search
              
              ul.navbar-nav.flex-row.align-items-center.ms-auto
                // Language
                
                 
                li.nav-item.me-2.me-xl-0
                  a.nav-link.style-switcher-toggle.hide-arrow(href='javascript:void(0);')
                    i.ti.ti-md
                // / Style Switcher
                // Quick links
               
                
                li.nav-item.navbar-dropdown.dropdown-user.dropdown
                  a.nav-link.dropdown-toggle.hide-arrow(href='javascript:void(0);' data-bs-toggle='dropdown')
                    .avatar.avatar-online
                      img.h-auto.rounded-circle(src='/assets/img/avatars/1.png' alt='')
                  ul.dropdown-menu.dropdown-menu-end
                    li
                      a.dropdown-item(href='pages-account-settings-account.html')
                        .d-flex
                          .flex-shrink-0.me-3
                            .avatar.avatar-online
                              img.h-auto.rounded-circle(src='/assets/img/avatars/1.png' alt='')
                          .flex-grow-1
                            span.fw-semibold.d-block #{user.first_name} #{user.last_name}
                            small.text-muted Admin
                    li
                      .dropdown-divider
                    
                    li
                      a.dropdown-item(href='/admin/settings')
                        i.ti.ti-settings.me-2.ti-sm
                        span.align-middle Settings
                    
                    li
                      a.dropdown-item(href='/auth/logout' )
                        i.ti.ti-logout.me-2.ti-sm
                        span.align-middle Log Out
                // / User
                // Search Small Screens
                .navbar-search-wrapper.search-input-wrapper.d-none
                  input.form-control.search-input.container-xxl.border-0(type='text' placeholder='Search...' aria-label='Search...')
                  i.ti.ti-x.ti-sm.search-toggler.cursor-pointer
          // / Navbar
          // Content wrapper
          
          .row 
           .col-md-10.m-3 
            != messages('message', locals)    
          block content
           
           
          
          .layout-overlay.layout-menu-toggle
          // Drag Target Area To SlideIn Menu On Small Screens
          .drag-target
    // / Layout wrapper
    // Core JS
    // build:js assets/vendor/js/core.js
    block modals
    script(src='/assets/vendor/libs/jquery/jquery.js')
    script(src='/assets/vendor/libs/popper/popper.js')
    script(src='/assets/vendor/js/bootstrap.js')
    script(src='/assets/vendor/libs/perfect-scrollbar/perfect-scrollbar.js')
    script(src='/assets/vendor/libs/node-waves/node-waves.js')
    script(src='/assets/vendor/libs/hammer/hammer.js')
    script(src='/assets/vendor/libs/i18n/i18n.js')
    script(src='/assets/vendor/libs/typeahead-js/typeahead.js')
    script(src='/assets/vendor/js/menu.js')
    script.
     moveToTabOnRefresh();
     function moveToTabOnRefresh() {
          // Get the fragment identifier from the URL
          var fragmentId = window.location.hash.substring(1);
          console.log(fragmentId)
          // Get the tab element based on the fragment identifier
          var tab = document.getElementById(fragmentId);

          // Check if the tab element exists
          if (tab) {
            // Remove the active class from all tabs
            var tabs = document.getElementsByClassName('nav-tab');
            for (var i = 0; i < tabs.length; i++) {
              tabs[i].classList.remove('active');
            }

            // Add the active class to the specified tab
            tab.classList.add('active');
          }
      }
    
    // endbuild
    // Vendors JS
    script(src="https://cdn.datatables.net/1.10.22/js/jquery.dataTables.min.js")
    script(src="https://cdn.datatables.net/buttons/1.6.4/js/dataTables.buttons.min.js")
    script(src="https://cdn.datatables.net/buttons/1.6.4/js/buttons.flash.min.js")
    script(src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.1.3/jszip.min.js")
    script(src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.53/pdfmake.min.js")
    script(src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.53/vfs_fonts.js")
    script(src="https://cdn.datatables.net/buttons/1.6.4/js/buttons.html5.min.js")
    script(src="https://cdn.datatables.net/buttons/1.6.4/js/buttons.print.min.js")
    script(src="https://cdn.datatables.net/plug-ins/1.10.11/sorting/date-eu.js" type="text/javascript")


    script(src='/assets/vendor/libs/apex-charts/apexcharts.js')
    script(src='/assets/vendor/libs/swiper/swiper.js')
    script(src='/assets/vendor/libs/datatables/jquery.dataTables.js')
    script(src='/assets/vendor/libs/datatables-bs5/datatables-bootstrap5.js')
    script(src='/assets/vendor/libs/datatables-responsive/datatables.responsive.js')
    script(src='/assets/vendor/libs/datatables-responsive-bs5/responsive.bootstrap5.js')
    script(src='/assets/vendor/libs/datatables-checkboxes-jquery/datatables.checkboxes.js')
    // Main JS
    script(src='/assets/js/main.js')
    // Page JS
    script(src='/assets/js/dashboards-analytics.js')
    script(src='/assets/js/tables-datatables-basic.js')
    script(src='https://cdn.tiny.cloud/1/zxrtafny97nj27zi7hjgv0g13f53556eixu9uweh515sd67g/tinymce/5/tinymce.min.js' referrerpolicy='origin')
    script.
        tinymce.init({
          selector: 'textarea.basic-example',
          height: 500,
          menubar: false,
          plugins: [
            'advlist autolink lists link image charmap print preview anchor',
            'searchreplace visualblocks code fullscreen',
            'insertdatetime media table paste code help wordcount'
          ],
          toolbar: 'undo redo | formatselect | ' +
          'bold italic backcolor | alignleft aligncenter ' +
          'alignright alignjustify | bullist numlist outdent indent | ' +
          'removeformat | help',
          content_style: 'body { font-family:Helvetica,Arial,sans-serif; font-size:14px }'
        }); 
    script.
      $('#editUser').on('show.bs.modal', function (event) {
          var button = $(event.relatedTarget)
          var user = button.data('bs-whatever');
          
          document.getElementById('user_id').value = user._id
          document.getElementById('first_name').value = user.first_name
          document.getElementById('last_name').value = user.last_name
          document.getElementById('email').value = user.username
          document.getElementById('role').value = user.role
          
      })
      $('#add_sub_category').on('show.bs.modal', function (event) {
          var button = $(event.relatedTarget)
          var cat = button.data('bs-whatever');
          
          document.getElementById('cat_id').value = cat._id 
          if(cat.has_icons === 'Yes')
          {
            document.getElementById('has_icons_div').style.display = 'block'
          }   
      })
    
    script.
      
       $('.dataTable-1').DataTable(
        {
           order: [[1, 'asc']],
          autoWidth: true,
          "lengthMenu": [
            [16, 32, 64, -1],
            [16, 32, 64, "All"]
          ]
        });
    script.
     let current_product = document.getElementById('current_product').value;
     if(current_product !== undefined)
     {
       current_product.checkout_options.map((item)=>{
          if(item === 'Design For Me')
          {
            document.getElementBy('design_for_me').checked = true

          }
          else if(item === 'Upload File')
          {
            document.getElementBy('upload_file').checked = true
          }
          else if(item === 'Design Online')
          {
             document.getElementBy('design_online').checked = true
          }
       })
       
      // Access the TinyMCE instance
      const editor = tinymce.get("#des");

      // Add content to the editor
      const content = product.description;
      editor.setContent(content);
     }